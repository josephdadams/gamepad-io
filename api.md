# gamepad-io API

gamepad-io has a socket.io API. It runs on Port `8809`.

**The following commands can be sent to the program:**

-   `version`:

    Replies with `version`: the version of gamepad-io currently running.

    ```javascript
    '0.1.0'
    ```

-   `controllers`:

    Replies with `controllers`, also emitted any time there is a change in detected controllers/gamepads:

    ```javascript
    controllers: [
        {
            index: 0, //index of the gamepad based on when it was connected to the computer
            id: 'Xbox 360 Controller (STANDARD GAMEPAD Vendor: 045e Product: 028e)',
            uuid: 'u5mws9TUEbrUWdvbtEfrrj', //generated by gamepad-io to uniquely reference this controller regardless of the order in which it was detected
            buttons: [
                {
                    buttonIndex: 0, //the button on the controller, zero-based
                    pressed: true, //true or false, if the button is currently pressed
                    touched: true, //true or false, if the button is currently touched
                    value: 1, //a value between 0 to 1 representing how pressed it is
                    percent: 100, //percentage of pressed between 0 to 100
                },
            ],
            axes: [
                {
                    axisIndex: 0, //the axis on the controller, zero-based
                    pressed: false, //whether or not the axis is not at zero
                    value: 0, //a value between -1 and 1 representing the position of the axis
                },
            ],
        },
    ]
    ```

-   `join_room`: Used to subscribe to controller button and axis events.

    -   `uuid`: The controller's uuid

-   `leave_room`: Used to unsubscribe to controller button and axis events.

    -   `uuid`: The controller's uuid

-   `haptic`:

    Used to send a haptic/vibration to the controller. Requires the following:

    -   `type`: `dual-rumble` or `trigger-rumble`
    -   `params`: Based on the Gamepad API.
        -   `duration`: Optional. The duration of the effect in milliseconds. Defaults to 0.
        -   `startDelay`: Optional. The delay in milliseconds before the effect is started. Defaults to 0.
        -   `strongMagnitude`: Optional. The rumble intensity of the low-frequency (strong) rumble motors, normalized to the range between 0.0 and 1.0. Defaults to 0.0.
        -   `weakMagnitude`: Optional. The rumble intensity of the high-frequency (weak) rumble motors, normalized to the range between 0.0 and 1.0. Defaults to 0.0.
        -   `leftTrigger`: (relevant to "trigger-rumble" effects only) Optional. The rumble intensity of the bottom-left front trigger, normalized to the range between 0.0 and 1.0. Defaults to 0.0.
        -   `rightTrigger`: (relevant to "trigger-rumble" effects only) Optional. The rumble intensity of the bottom-right front trigger, normalized to the range between 0.0 and 1.0. Defaults to 0.0.

**The following events will be emitted to the clients:**
_Only emitted to the socket.io room with the name of the uuid of the controller, so your client must use `join_room` first to receive the events._

-   `button_event`:

    -   `uuid`: The unique persisting ID of the controller generated by gamepad-io
    -   `buttonIndex`: the button on the controller
    -   `pressed`: true/false
    -   `touched`: true/false
    -   `val`: Value between 0 to 1 representing how pressed it is
    -   `pct`: percentage of pressed between 0 to 100

-   `axis_event`:
    -   `uuid`: The unique persisting ID of the controller generated by gamepad-io
    -   `axisIndex`: The axis on the controller, zero-based
    -   `pressed`: The boolean determined by gamepad-io as to whether or not the axis is moved past zero
    -   `val`: Value between 0 to 1 of the location of the axis
